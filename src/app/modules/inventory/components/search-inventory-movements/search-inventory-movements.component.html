<fn-datepicker-range-popup (onFilter)="filterByDate($event)" (onClearFilter)="clearFilters()"></fn-datepicker-range-popup>


<div class="alert alert-warning alert-dismissible fade show" role="alert" 
*ngIf="!isLoading && this.movimientos.length == 0">
    <strong class="text-danger">Movements no localizados</strong>
  </div>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Movimiento N#</th>
            <th>Operador</th>
            <th>Fecha</th>
            <th>Entrada/Salida</th>
            <th>Interno/Externo</th>
        </tr>
    </thead>

    <tbody *ngFor="let movimiento of this.movimientos;let i = index">
        <tr>
            <td>{{ i+1  }}</td>
            <td>{{ movimiento.operator }}</td>
            <td>{{ movimiento.date }}</td>
            <td>{{ movimiento.movement_type }}</td>
            <td>{{ (movimiento.is_internal)? 'Interno' : 'Externo' }}</td>
        </tr>
        <tr>
            <td colspan="5">
                <div class="table-responsive">
                    <table class="table mb-0 table-hover ">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Cantidad</th>
                                <th colspan="3">Origen</th>
                                <th colspan="3">Destino</th>
                            </tr>
                            <tr>
                                <th></th>
                                <th></th>
                                <th>Zona</th>
                                <th>Sección</th>
                                <th>Espacio</th>
                                <th>Zona</th>
                                <th>Sección</th>
                                <th>Espacio</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let detail of movimiento.movement_details">
                                <td>{{ detail.product }}</td>
                                <td>{{ detail.quantity }}</td>
                                <td>{{ detail.location_origin ? detail.location_origin.zone : '' }}</td>
                                <td>{{ detail.location_origin ? detail.location_origin.section : '' }}</td>
                                <td>{{ detail.location_origin ? detail.location_origin.space : '' }}</td>
                                <td>{{ detail.location_destination? detail.location_destination.zone : '' }}</td>
                                <td>{{ detail.location_destination ? detail.location_destination.section : '' }}</td>
                                <td>{{ detail.location_destination ? detail.location_destination.space : '' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </td>
        </tr>
    </tbody>
</table>



