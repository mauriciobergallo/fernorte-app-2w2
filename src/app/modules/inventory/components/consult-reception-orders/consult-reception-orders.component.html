<div class="container text-center mt-4">
  <h2>Órdenes de recepción</h2>
</div>
<div class="container mt-5 text-center">
  <div class="row">
    <form #filterForm="ngForm" class="filter-form">
      <div class="input-value">
        <input type="text" class="form-control" placeholder="Ingrese valor" name="filterValue" [(ngModel)]="filterValue"
          required #filterValueField="ngModel"
          [ngClass]="{'is-invalid': filterValueField.invalid && filterValueField.touched}">
      </div>
      <div class="select-value">
        <select class="form-select" aria-label="Default select example" name="filterType" [(ngModel)]="filterType">
          <option selected value="supplier">Proveedor</option>
          <option value="state">Estado</option>
          <option value="date">Fecha</option>
        </select>
      </div>
      <div class="">
        <button class="btn btn-primary" (click)="applyFilters(filterForm)">Filtrar</button>
      </div>
    </form>
  </div>
  <div class="form-check check-container my-2">
    <input class="form-check-input me-2" type="checkbox" [value]="onlyConfirmedOrders" id="flexCheckDefault"
      (input)="updateorderList()">
    <label class="form-check-label" for="flexCheckDefault">
      Incluir todas las órdenes
    </label>
  </div>

  <span>{{ filterForm.value | json}}</span>
  <fn-spinner *ngIf="loading"></fn-spinner>
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Proveedor</th>
        <th scope="col">Fecha</th>
        <th scope="col">Hora</th>
        <th scope="col">Estado</th>
        <th scope="col">Nro orden de compra</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let reception of receptionOrderList?.items">
        <td>{{ reception.supplier_name }}</td>
        <td>{{ reception.reception_date }}</td>
        <td>{{ reception.reception_hour }}</td>
        <td>{{ reception.state }}</td>
        <td>{{ reception.purchase_order_number }}</td>
        <td>
          <div class="dropdown">
            <button type="button" class="btn btn-light" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <div class="dropdown-content" (click)="navigateToDetails(reception.id_reception_order)">
              <a><i class="bi bi-eye" style="cursor: pointer; font-size: 20px; margin-right: 5px;"></i>VER</a>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="d-flex justify-content-center" style="margin-top: 5%;">
  <ul class="pagination">
    <li class="page-item" style="cursor: pointer;" [class.disabled]="currentPage === 1"
      (click)="previousPage(filterForm)">
      <a class="page-link" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
    <div *ngIf="totalPages === 1">
      <li class="page-item">
        <a class="page-link">{{ currentPage }}</a>
      </li>
    </div>
    <div *ngIf="totalPages > 1">
      <li class="page-item">
        <a class="page-link">{{ currentPage }}</a>
      </li>
      <li class="page-item">
        <a aria-readonly="true" class="page-link">...</a>
      </li>
      <li class="page-item">
        <a class="page-link">{{ totalPages }}</a>
      </li>
    </div>

    <li class="page-item" style="cursor: pointer;" [class.disabled]="currentPage === totalPages"
      (click)="nextPage(filterForm)">
      <a class="page-link" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
</div>