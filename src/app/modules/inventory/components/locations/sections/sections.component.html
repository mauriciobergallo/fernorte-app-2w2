<div class="container mt-4">
  <div class="px-4 py-4 my-2">
    <h2 class="">Secciones</h2>
  </div>
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <button type="button" class="btn btn-secondary  mx-2" (click)="backToSections()"> Volver </button>
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#agregarUbicacionModal">
        <i class="bi bi-plus"></i> Agregar Seccion
      </button>
    </div>


    <div class="text-center">
      <div class="mb-2">
        <strong>Total :</strong> {{totalCapacity}}
      </div>
      <div>
        <strong>Total Ocupado:</strong> {{getOcupacionTotal()}}
      </div>
    </div>
  </div>
  <hr>

  <div class="row">
    <div class="col">
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="text-center">Nombre</th>
            <th class="text-center">Categoria</th>
            <th class="text-center">Capacidad Máxima</th>
            <th class="text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <!-- Filas de ubicaciones -->
          <tr *ngFor="let item of sections">
            <td class="text-center">{{ item.name }}</td>
            <td class="text-center">{{ item.categoryName }}</td>
            <td class="text-center">{{ item.maxCapacity }}</td>

            <td class="text-center">
              <div class="dropdown">
                <button type="button" class="btn btn-light dropdown-button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  <i class="bi bi-three-dots-vertical"></i>
                </button>
                <div class="dropdown-content">
                  <a (click)="navigateToSpace(item)"><i class="bi bi-eye"
                      style="cursor: pointer; font-size: 20px; margin-right: 5px;"></i>Detalles</a>
                  <a><i class="bi bi-eye" style="cursor: pointer; font-size: 20px; margin-right: 5px;"></i>Editar</a>
                  <a (click)="eliminarZona(item)"><i class="bi bi-eye"
                      style="cursor: pointer; font-size: 20px; margin-right: 5px;"></i>Eliminar</a>
                </div>
              </div>

            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="modal fade" id="agregarUbicacionModal" tabindex="-1" aria-labelledby="agregarUbicacionModalLabel"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="agregarUbicacionModalLabel">Agregar Sección</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Contenido del formulario para agregar ubicación -->
        <form>
          <div class="mb-3">
            <label for="nombreZona" class="form-label">Nombre:</label>
            <input type="text" class="form-control" id="nombreZona" (input)="updateZoneName($event)">
          </div>
          <div class="mb-3">
            <label for="nombreZona" class="form-label">Categoria:</label>
            <select class="form-control" id="nombreZona" (input)="updateZoneCategory($event)">
              <option value="Almacenamiento y Organización">Almacenamiento y Organización</option>
              <option value="Electricidad">Electricidad</option>
              <option value="Automóviles">Automóviles</option>
              <option value="Construcción">Construcción</option>
              <option value="Plomería">Plomería</option>
              <option value="Herramientas Eléctricas">Herramientas Eléctricas</option>
              <option value="Herramientas Manuales">Herramientas Manuales</option>
              <option value="Jardinería">Jardinería</option>
              <option value="Pintura y Acabados">Pintura y Acabados</option>
              <option value="Seguridad y Cerrajería">Seguridad y Cerrajería</option>

            </select>
            <!-- <input type="text" class="form-control" id="nombreZona" (input)="updateZoneCategory($event)"> -->
          </div>
          <div class="mb-3">
            <label for="maxCapacidad" class="form-label">Capacidad Máxima:</label>
            <input type="number" class="form-control" id="maxCapacidad" [max]="totalCapacity - getOcupacionTotal()"
              (input)="updateZoneCapacity($event)">
            <small class="text-muted">Máxima Capacidad Permitida: {{ totalCapacity - getOcupacionTotal() }}</small>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-primary" [disabled]="excedeCapacidadMaxima()"
          (click)="insertZone()">Guardar</button>
      </div>
    </div>
  </div>
</div>
<!--<div class="d-flex justify-content-center" style="margin-top: 5%;">
    <ul class="pagination">
      <li class="page-item" style="cursor: pointer;" [class.disabled]="currentPage === 1" (click)="previousPage()">
        <a class="page-link" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link">{{ currentPage }}</a>
      </li>
      <li class="page-item" style="cursor: pointer;" [class.disabled]="currentPage === totalPages" (click)="nextPage()">
        <a class="page-link" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </div>
</div>-->